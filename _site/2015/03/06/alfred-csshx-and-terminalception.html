<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Alfred, csshx and terminalception</title>
  <meta name="description" content="Alfred, csshx and terminalception" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@dbsmasher" />
    <meta name="twitter:title" content="Alfred, csshx and terminalception" />
    <meta name="twitter:image" content="http://localhost:4000/assets/images/unicorn_av.png" />
    
    <meta name="twitter:description"  content="Alfred, csshx and terminalception" />
    
  
  
  <meta property="og:site_name" content="dbsmasher corner" />
  <meta property="og:title" content="Alfred, csshx and terminalception"/>
  
  <meta property="og:description" content="Alfred, csshx and terminalception" />
  
  <meta property="og:image" content="http://localhost:4000/assets/images/unicorn_av.png" />
  <meta property="og:url" content="http://localhost:4000/2015/03/06/alfred-csshx-and-terminalception.html" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2015-03-06T14:47:41-08:00">

  <link rel="canonical" href="http://localhost:4000/2015/03/06/alfred-csshx-and-terminalception.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->


  <a href="http://localhost:4000" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/unicorn_av.png)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">Alfred, csshx and terminalception</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2015-03-06T14:47:41-08:00">06 Mar 2015</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <h3 id="alfred-csshx-and-terminalception">Alfred, csshx and terminalception</h3>

<p>I use Tmux usually but Tmux on the mac has not been playing nice with csshx for me. Something in the dark magic of perl broke with an error that looks like this</p>

<blockquote>
  <p>Mar  5 08:58:42 silvias-MacBookPro.local perl[10828] <Error>: ImageIO: CGImageDestinationFinalize image destination must have at least one image
2015-03-05 08:58:42.473 perl5.18[10828:2436454] CGImageDestinationFinalize failed for output type 'public.tiff'
**** ERROR **** PerlObjCBridge:: convertPerlToObjC(): Referenced thingy not blessed
**** ERROR **** PerlObjCBridge:: convertArg() for index 2: convertPerlToObjC() failed
**** ERROR **** PerlObjCBridge:: sendObjcMessage: Error converting argument 1 for message "setObject:forKey:"
**** ERROR **** PerlObjCBridge: error [1] sending message [__NSDictionaryM setObject:forKey:] at /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level/PerlObjCBridge.pm line 248.</Error></p>
</blockquote>

<p>But I wasnâ€™t about to let that take away my terminalception magic :)</p>

<p>Note: This is for a mac environment but you may emulate it in your favourite distro by replacing Alfred with whatever launcher you may use.</p>

<h4 id="what-you-need">What you need</h4>
<p>Alfred app is my favorite launcher in mac but I suspect Quicksilver (if you are the quaint type) can also run commands directly to the terminal.</p>

<p>Next install Homebrew. You need this to install csshx easily. Also because GNU tools :)
<code class="highlighter-rouge">ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code></p>

<p>Install csshx</p>

<p><code class="highlighter-rouge">brew install csshx</code></p>

<p>If you are chef shop like mine, a lot of times what you are looking for is to ssh to all the machines of a certain type. In chef, we call those roles. This step will change depending on the configuration management/service discovery framework of choice in your infrastructure.</p>

<p>First, set the terminal app your alfred will use. I set it to Terminal because I wanted this to be separate from my usual workspace in iTerm 2</p>

<p><img src="https://farm1.staticflickr.com/735/22396914786_e46c0ed4cd_b.jpg" alt="Alfred settings" /></p>

<p>Then, when I want to fire up csshX to a bunch of our our servers all at once, it usually looks like this.</p>

<p><em>Protip</em>: knife ssh can take cssh as an argument, so no awk and bash pipes required.</p>

<p><img src="https://farm6.staticflickr.com/5793/22433815321_7b1f1fced2_b.jpg" alt="alfred term" /></p>

<p>This fires up Terminal, which runs the chef search, and opens separate windows.</p>

<p><img src="https://farm6.staticflickr.com/5805/22422959375_891c2f313a_k.jpg" alt="csshx cap" /></p>

<p>Your cursor will be in the bottom red window by default and input will appear in all the windows at the same time. When done, CMD+Q will bring this window</p>

<p><img src="https://farm1.staticflickr.com/744/22422971645_735d9473b9_b.jpg" alt="quit window" /></p>

<p>And done :)</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Alfred%2C+csshx+and+terminalception&amp;url=http://localhost:4000/2015/03/06/alfred-csshx-and-terminalception"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Silvia Botros</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2015-03-06 14:47">06 Mar 2015</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Silvia Botros</a> &copy; 2018<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/backlit-blogging-business-34153.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">dbsmasher corner</h1>
        <h2 class="blog-description">Thoughts, stories and ideas
</h2>
        <a href=/ class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>

<!-- Google Analytics -->
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-78506807-1', 'auto');
ga('send', 'pageview');

</script>



  </body>
</html>
