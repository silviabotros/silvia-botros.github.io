<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>dbsmasher corner &#8211; dbsmasher corner</title>
<meta name="description" content="Thoughts, stories and ideas">


<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@dbsmasher">
<meta name="twitter:creator" content="@dbsmasher">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="dbsmasher corner">
<meta property="og:description" content="Thoughts, stories and ideas">
<meta property="og:url" content="http://localhost:4000/">
<meta property="og:site_name" content="dbsmasher corner">
<meta property="og:image" content="http://localhost:4000/images/images/logo.png">





<link rel="canonical" href="http://localhost:4000/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="dbsmasher corner Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post-index">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="http://localhost:4000/">
          
            <img class="logo" src="http://localhost:4000/images/logo.png" alt="dbsmasher corner">
          
          <a href="http://localhost:4000/" class="title"> dbsmasher corner</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="http://localhost:4000/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>dbsmasher corner</h1>
      
        <h2><span class="entry-date"><time>&nbsp;</time></span></h2>
      

      
          <p class="entry-reading-time">
            &nbsp;
          </p><!-- /.entry-reading-time -->
      
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="http://localhost:4000/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="http://localhost:4000/tags"><h3>Tags</h3></a></li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/dbsmasher" class="btn btn-info button-twitter" data-show-count="false" data-size="large"><i class="fa fa-twitter"></i> <span> | Follow @dbsmasher</span></a>



<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2017-12-25T20:11:42-08:00"><a href="http://localhost:4000/2017-in-review/">December 25, 2017</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Silvia Botros">Silvia Botros</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/2017-in-review/" rel="bookmark" title="2017 in review" itemprop="url">2017 in review</a></h1>
    
  </header>
  <div class="entry-content">
      <p>In some ways it feels like this year flew by, in others like it was as long as an eternity. Looking back, it definitely surprises even <em>me</em> how many significant events have happened in these 12 months. I know one can say that about pretty much every year but it feels more pronounced this time. Without much ado, here is a recap of how this year has been.</p>

<h3 id="team-of-one-no-more">Team of one no more</h3>

<p>By the beginning of 2017, we had secured an accepted offer from Bill who was to become Sendgrid‚Äôs second in house DBA. While the larger tech ops org had always had my back during maternity leaves and vacations and we‚Äôve always had a strong support team in the folks in Pythian, it was clear that we were overdue for the in house DB Ops team to no longer remain a one woman team.</p>

<p>This was not just a great thing for the team and Sendgrid, but also tremendously useful for my career growth. I had been running on fumes for a while and started to chafe at my day to day tasks, itching to get more involved in large strategy planning rather than drowning in daily tactical tasks. But to do all that I needed to also learn to let go of some things I have had full control over for while. Now, almost a year later, I have realized that having a trusted partner on my team has led to serendipitous changes like letting engineering teams write the chef cookbooks for managing their new database clusters. This process of ‚Äòletting go‚Äô was a crucial first step to the next big career event in 2017 for me. I was told recently that in the past year I have become more pragmatic. And I think this was the single most unexpected but welcome result of not working in isolation anymore.</p>

<h3 id="new-titlea-whole-new-role">New title‚Ä¶a whole new role</h3>

<p>It was clear to me in 2016 that i was hitting a ceiling in career growth if I remained a single person team doing tactical work all the time. Once the team grew by 100% (üòÉ), I was able to focus more on higher level planning. Getting more involved in architecture blueprints, writing more blog posts, planning my first ever conference talk (more on all that later).</p>

<p>By late 2017, I earned my promotion to Principal DBA which, while the next step in the IC career track at Sendgrid, is also a role that is far more leadership than ‚Äòheads down on code‚Äô. Since this promotion, my role has now shifted from working on code to lots and lots of planning and reading or architecture blueprints. Yes, it means more meetings..but it also means having a broader impact on how we build or rebuild pieces of our architecture and supporting entire teams. If being a ‚Äòsenior engineer‚Äô requires one to be a force multiplier within their team, it feels that principal engineer demands that ten times as much and with a much larger impact across the organisation.</p>

<p>I am still working on accepting changes that have come with this role change, my calendar is certainly a testament and my standup updates are almost always a mix of ‚ÄòTalked to Person X about project Foo and Person Y about project Bar‚Äô. Getting my head as an engineer out of classifying these conversations as ‚Äònon work‚Äô and instead recognising them as critical collaboration as part of a distributed engineering organisation is now part of my job. As my dear friend Sean Kilgore said in a  tweet:  ‚ÄúMy specialty is random conversations. And all of the gdocs suggestions.‚Äù He meant it in jest but I think this is not a bad goal to have in 2018 üòÉ</p>

<h3 id="blog-posts">Blog posts</h3>

<p>While technical posts such as <a href="https://sendgrid.com/blog/encrypting-our-backups-making-it-to-that-finish-line/">How we encrypted our backups</a> are always fun and rewarding once a project is complete, it seems like the most popular post I wrote this past year was a more personal one on <a href="https://dbsmasher.com/2017/09/30/on-leadership-vs-management/">management vs leaderhsip</a>. I will not rehash here my thoughts on the subject but I will note that, for all the focus many people in tech put on the code and the tools. It is definitely of note that blog posts on the human interactions side of the job that seem to get a lot more attention and spark more discussion. It is a good thing. It is about time we stopped pretending this field doesn‚Äôt have human vs human responsibilities.</p>

<h3 id="second-tech-conference-first-talk">Second tech conference, first talk</h3>

<p>One of the highlights of 2017 was being able to attend and speak at LISA. LISA is one of the oldest tech conferences around and through its selections of chairs and talk chairs, has done a great job at being inclusive to attendees and first time speakers, myself included.</p>

<p>My talk was about <a href="https://www.youtube.com/watch?v=Ym408YX2zTA">working with DBAs in a Devops world</a> which was in part what I talked about, but also the title was more of a hook to talk about ‚Äúhow to architect products by talking to people‚Äù. I wrote a <a href="https://opensource.com/article/17/10/working-dbas-devops-world">preview blog post</a> which was very helpful in shaping exactly what I was going to cover besides the outline of the proposal. I also got lots of help and support from wonderful people like <a href="http://blog.alicegoldfuss.com">Alice Goldfuss</a> and <a href="https://twitter.com/clynnexx">Connie-Lynne Villani</a> in both enouraging me to submit to LISA and at the conference as a a ball of nervous energy until I was done presenting.</p>

<p>LISA was also my second ever tech conference to attend and I realized that i now much prefer conferences with really diverse attendance. I got to meet so many fellow women in tech and had plenty of awesome conversations that I will cherish for a long time and it was all because of a planning committee that put real work in making sure the conference had a friendly and inclusive environment.</p>

<h3 id="ipo">IPO!</h3>

<p>January 2018 will mark six years working for Sendgrid. When I joined I had no idea that the business of delivering emails was‚Ä¶.a business‚Ä¶and possibly a lucrative one. It was a highlight of this year and possibly the rest of my career being in NYC and, in person, watching the company I have poured years of hard work in go public and have its day in the sun. While this is only a milestone and not a destination, it is definitely a milestone many companies strive to accomplish and it felt good being a part of it.</p>

<h3 id="wrap-up">Wrap-up</h3>

<p>It has been a <em>very</em> busy year indeed. I have not yet thought about any personal goals in 2018 but I sure have plenty of them professionally. If it turns out to be half as awesome as 2017 has been, it won‚Äôt be too bad. üòâ</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2017-09-30T05:10:59-07:00"><a href="http://localhost:4000/on-leadership-vs-management/">September 30, 2017</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Silvia Botros">Silvia Botros</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/on-leadership-vs-management/" rel="bookmark" title="On leadership vs management" itemprop="url">On leadership vs management</a></h1>
    
  </header>
  <div class="entry-content">
      <p><em>This post is a flight of ideas. Blame Charity getting my brain going</em></p>

<p>This morning, I came to twitter to find <a href="https://storify.com/dbsmasher/conversation-with-mipsytipsy-and-jaysoifer">this thread of tweets</a> from the always awesome Charity majors.</p>

<p>This got me thinking about how it seems many poeple in our field, and so many companies by consequence, have adopted the attitude that leadership comes from above. That you must have a certain title to be able to lead in your organization.</p>

<p>In individual contributors, this can be a sign of lack of maturity. An engineer should not be considered ‚Äòsenior‚Äô unless they exhibit a sense of ownership towards the business and a sensibility towards what‚Äôs best for the customers. Not only that, but a senior engineer should also be capable of influencing engineers around her to ‚Äòdo it right‚Äô. That sometimes means the longer way and sometimes even means the less ‚Äòcool‚Äô tech. A senior engineer, even if not a ‚Äòteam lead‚Äô, should be able to argue, with data, for solutions that provide the most business value with the least amount of risk.</p>

<p>Similarly, if Junior/associate engineers are to grow in their careers, they should be encouraged to find their passion and translate that into business value. As engineers, we may be insulated from the customer facing work by having support teams and customer sueccess reps but that should not mean we cannot be aware of how the quality of our work impacts the customers and our co workers who have to talk to the customers.</p>

<p>Sadly we do not learn enough of that in our fancy CS degrees. Too much emphasis is put on algorithms and software and not enough in understanding how to talk to the business side of the company, how to have empathy for the customer facing team members and how to behave and think as one team that is ultimately providing a service to paying customers. I was guilty of this as a fresh grad. I was looking to write code, to play with software that was new to me and handling customers‚Äô issues was a ‚Äònuisance‚Äô that I just had to deal with. It took the fall of my first company to learn that code and elegant design are nothing if they are not providing a business value and solving a problem for a paying customer.</p>

<p>This is also a problem of managers. Micro managers, among many other harms, reinforce the idea that only managers can decide how things are done and make decisions. Select all managers who do not advocate for their team and know how to say no during critical organizational planning imply to the team that they cannot drive excellence themselves but have to be told, by some laid out plan devised by executives, what to do.</p>

<p>Now, that is not to say that the executive perspective is not of value. Far from it, an executive has the position of knowing the market landscape a company is competing in, and owns the strategy of the organization to develop an edge in that marklet. But the executive is not to be expected to know the details and severity of tech debt the company has accumelated and what parts of said tech debt can closely endanger meeting this needed business edge. Without individual contributors understaning their company strategy and making these connections between ‚Äúthis service is old and needs a refactor‚Äù and ‚Äúwe need this to make that new product scalable and an easier sell‚Äù, the executive team may never see their lofty plans to fruition and ultimately the business will lose customers.</p>

<p>So what can be done to make this better?</p>

<p>Yes it involves everyone‚Ä¶</p>

<p>It is important to make ‚Äòsense of ownership‚Äô a part of performance review for everyone, not just for team leads and line managers. It should be something junior individual contributors strive to internalize in order to grow in their careers and it needs to be something senior team members have to exhibit and are scored on. Remember, it is what goes in the performance review that shows what the company <em>really</em> values. Since it is literally ‚Äòputting money where your mouth is‚Äô. One thing that is <em>very</em> dangerous, is mistaking when an individual contributor is sounding the alarm about an architectural problem as them being ‚Äúa cynic‚Äù or a ‚Äúpessimist‚Äù. That is especially a problem that women in tech face as we are expected to just be merry and happy all the time and when we point out issues during design reviews, it tends to be seen as being ‚Äòbrash‚Äô or ‚Äòharsh‚Äô. Actively burying concerns from team members and chalking them off to ‚Äòpersonality‚Äô or the ever non inclusive phrase ‚Äòteam fit‚Äô will only spell long term dysfunction for your organization. Ignore at your own risk.</p>

<p>Line managers, those whose direct reports are all individual contributors, need to constantly let their reports bubble up pain points in the company tech stack. Involve them in the roadmap planning process. Make sure to communicate to them the strategy and not just ‚Äòhere is what we will be doing‚Äô. For many people, knowing the why goes a very long way in being invested to do the best possible job. Line managers should encourage the quiet ones to still participate in this discussion even if not in front of the whole team. Sometimes the best feedback on ‚Äòwhat needs to be fixed‚Äô can come out of 1:1 conversations. Not everyone is comfortable sounding these concerns in a group.</p>

<p>Finally, directors and executives should be open to feedback from all levels of the organization. Do not wait for this to come to you. At my current company we do a biannual survey that is deliberately anonymous but allows everyone to provide the executive team with feedback from all levels of the company. It is <em>super</em> important to not just solicit this feedback but to transparently also create action items based on that feedback and report back to the company on the progress of these action items.</p>

<p>Thanks to Charity and Nicole for sparking this post and to <a href="https://www.amazon.com/Managers-Path-Leaders-Navigating-Growth/dp/1491973897/ref=sr_1_1?ie=UTF8&amp;qid=1506747712&amp;sr=8-1&amp;keywords=the+manager%27s+path">Camille Fournier‚Äôs book</a> that has given me a great perspective into management.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2017-05-07T20:49:11-07:00"><a href="http://localhost:4000/untitled-chef-audit-mode/">May 07, 2017</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Silvia Botros">Silvia Botros</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/untitled-chef-audit-mode/" rel="bookmark" title="Chef audit mode" itemprop="url">Chef audit mode</a></h1>
    
  </header>
  <div class="entry-content">
      <p>I have spoken before about how important it is for me and my team to make as many parts of the database stack match our larger infrastructure. One of the most crucial ways to do this is to make sure that not only are we deploying and managing databases using configuraton management, but that the cookbooks remain in lock step with changes our cookbooks at large move towards.</p>

<p>When i first learned chef, the way to test your chef cookbooks was <a href="https://github.com/chef/minitest-chef-handler">chef minitest</a>. But that is <a href="https://github.com/chef/minitest-chef-handler/blob/master/README.md#deprecation-notice">now deprecated</a> and is no longer the recommended test method of chef cookbooks. So what is a DBA who is not always in tune with chef land to do? learn from her teammates of course! üòÄ</p>

<p>With the help of our ops engineering team members, I was directed at some examples in newer cookbooks we have and to the resources supported by InSpec which is what chef-audit is based on.</p>

<p><em>So how does chef audit mode work?</em></p>

<p>Chef audit works exactly like recipe code. In fact, you can write the audit code right inside the recipe it is auditing. It is very natural in its language which makes it very easy to write <em>before</em> the actual chef code (hint hint: TDD FTW!) and it has lots of <a href="http://serverspec.org/resource_types.html">resource types</a> which make for simple, easy to read and maintain, tests.</p>

<p><em>So if I have a cookbook that was using minitest, how can I make it move to chef audit?</em></p>

<p>You need to decide where your audit code will live. Your options are:</p>

<ul>
  <li>
    <p>One gigantic audit recipe that is included in your runlist however you normally include recipes in the cookbook. This option will put all the code in one file but can get unwieldy and large as a cookbook gets more complex</p>
  </li>
  <li>
    <p>An <code class="highlighter-rouge">_audit_foo.rb</code> recipe for every <code class="highlighter-rouge">foo.rb</code> recipe you already have. The audit ones have to be separately included as well. This is arguably the most organized manner to do this and can work very well for books with lots of internal recipes where one large audit file can get very large. But it can also feel like recipe sprawl.</p>
  </li>
  <li>
    <p>Add the audit code directly inside each recipe. This is nice because you can then see in the same file both the code that makes the changes and the audits that run to validate the policies around these changes. But again, this can get harder to use if the individual recipe is long or complex</p>
  </li>
</ul>

<p>Each of these, as you can see, have pros and cons. The good thing about this flexibility is that you can pick what works best for your cookbook or organization :D</p>

<p>Now onto an example‚Ä¶or two‚Ä¶</p>

<p>Say you have this code block in a recipe to drop a script file in a specific spot and make it executable.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cookbook_file</span> <span class="s1">'/usr/local/bin/test_backup.sh'</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">'test_backup.sh'</span>
  <span class="n">owner</span> <span class="s1">'mysql'</span>
  <span class="n">group</span> <span class="s1">'mysql'</span>
  <span class="n">mode</span> <span class="mi">0</span><span class="n">o755</span>
  <span class="n">action</span> <span class="ss">:create</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The code to audit this block would look like this</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">control_group</span> <span class="s1">'MySQL BackupTests : Archive access'</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">'test_backup.sh'</span> <span class="k">do</span>
      <span class="n">describe</span> <span class="n">file</span><span class="p">(</span><span class="s1">'/usr/local/bin/test_backup.sh'</span><span class="p">)</span> <span class="k">do</span>
        <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">exist</span> <span class="p">}</span>
        <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be_file</span> <span class="p">}</span>
        <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be_executable</span> <span class="p">}</span>
        <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">be_owned_by</span> <span class="s1">'mysql'</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>As you can see, the audit part is very natural in its language, and the resources are quite simple to use. So how do we tell chef to run this audit code in our test environment?</p>

<p>Presuming you use test kitchen, you need to edit that config to enable audit mode.
Under the provisioner section of your <code class="highlighter-rouge">.kitchen.yml</code> config file, add these 2 lines:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>client_rb:
  audit_mode: :enabled
</code></pre></div></div>

<p>So what are the advantages of audit_mode vs the old minitests? well besides the fact that minitest is deprecated, I find that having the test code as part of the recipe tree (and better yet, can even be <em>in</em> the recipe directly) gives a very nice single view of what every recipe should look like and what my view of the state of the host should be based on that. That should come even handier for anyone trying to look at a cookbook I wrote and understand what the cookbook is supposed to do.</p>

<p>Aa I started a journey with chef <a href="https://dbsmasher.com/2015/02/12/-learning-configuration-management-as-a-dba/">a few years back</a>, converting my knowledge on how to build our databases into repeatable cookbooks, I will be spending the next months with the rest of our data ops team converting our resources into chef audit code.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-12-07T18:38:21-08:00"><a href="http://localhost:4000/on-being-on-call/">December 07, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Silvia Botros">Silvia Botros</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/on-being-on-call/" rel="bookmark" title="On being on call" itemprop="url">On being on call</a></h1>
    
  </header>
  <div class="entry-content">
      <p>In case you don‚Äôt follow <a href="https://sysadvent.blogspot.com/">SysAdvent</a> (in which case, why?? you are missing out on great content every year!), the post on December 6th this year was by <a href="https://sysadvent.blogspot.com/2016/12/day-6-no-more-on-call-martyrs.html">Alice Goldfuss</a>. I have tweeted a link to that post that day and since then my tweet has been quoted, responded to and the ensuing ‚Äòconversation‚Äô has been eyeopening.</p>

<p>A lot of the response has been anger that an operations engineer is advocating for putting developers on call. A lot were quick to suggest that this is a quick way to lose engineers, that it advocates a terrible quality of life, that it stomps on work/life balance and that it ultimately doesn‚Äôt serve to improve code quality.</p>

<p>The most surprising response was suggesting that this call comes from the privilege of not having family/kids responsibilities which I suppose implies only the single people are in ops and carrying pagers.</p>

<p>I can go on and on about how little empathy I have seen from people who are supposed to be fellow engineers towards their fellow human ops people</p>

<p>I can go on and on about how many naively suggested that testing and ‚ÄòQA‚Äô are sufficient to not need the people who wrote the code to own their work in the real world environment of a system of scale</p>

<p>I can go on and on about what it says about people who presumes Alice meant ‚Äúgive the developer a pager and send off into the night‚Äù‚Ä¶I suppose that‚Äôs fine when you do it to the ops gal instead.</p>

<p>There is a lot to unpack in these responses, many of which disappointing from engineers I respect, but I want to pinpoint 2 things</p>

<p>What does it mean to put engineers on call</p>

<p>NO it does not mean spite and no it is not punishment for bugs and no it is not a call for dissolving the lines between life and work. I have written about my experience with burnout before and I wish that on no one.</p>

<p>What it means to put engineers who write the code on call is that they are the subject matter experts on what is running in production. They know when error foo happens it means the cache layer failed, DNS is taking too long or maybe that the other microservice in that product comprised of about a dozen of them is the one silently failing. You may think an architecture diagram can make stuff like this clear as day but when YOU, the person on the team who has been building this thing for 2 quarters has to look at your own architecture diagram one quarter later to grok which microservice has failed you will realize why you should be paged first.</p>

<p>This does not mean at all that Ops wants nothing to do with your application paging out at 3 AM. We put our delivery engineering teams (the term ‚Äòdelivery‚Äô here is deliberate and very appropriate) on call but they always have an escalation path to ops that is not gated by a timer. Ops still has your back. If you think this is a network problem you are not familiar with, you can immediately page the on call ops engineer and she will help verify where the broken zeros and ones are.</p>

<p>This is not an effort to spite those who dare push a bug to production. Anyone who has been responsible for production environments knows that will happen. Hell, you don‚Äôt even HAVE to introduce bugs through a deploy, really. Unforeseen changes in your environment will cause presumptions to stop being valid and take both those who wrote the code and those with less knowledge of it (Ops) by surprise.</p>

<p>What this does mean is that we are explicitly saying that the code is useless unless it provides the customers the value they paid for. And when a C level executive has to explain to customers why an outage took X time to resolve, ‚Äúwe couldn‚Äôt get the engineering team involved for some time‚Äù is not an acceptable answer.</p>

<p>Your code and my servers and databases are a risk center unless we are both invested in making them run. It is as simple as that.</p>

<p>What does it mean to be a senior engineer</p>

<p>It honestly frightened me that people who are senior engineers are balking so hard at giving developers pagers. Maybe they fell for the hyperbole of ‚Äúwe now don‚Äôt want developers to sleep either‚Äù, maybe they‚Äôve been on call in difficult environments before and that‚Äôs the PTSD talking. But I do not believe that any engineer should be called ‚Äòsenior‚Äô, by title or by implication if they refuse to be reachable in a team rotation in case their own work caused a customer facing issue.</p>

<p>Note my words because I am trying my best to choose them carefully. ‚Äòcustomer facing issue‚Äô. You can‚Äôt give people pagers without making sure you are not paging on bullshit signals that aren‚Äôt actually affecting the customers and the business. And surprise, ops engineers are people too.</p>

<p>So what does this mean? If you fail to see how your code is more than the sum of its functions and test. That it needs to provide real value. If you insist that someone else be the first line of defense when it breaks, then you are failing to acknowledge that as a senior engineer, your job is more than producing code. You are setting a terrible example for junior engineers on your team. They will now learn the lesson of ‚ÄúI don‚Äôt have to own that my code provides value once it‚Äôs in production‚Äù. The damage that mentality will do to an engineering organization is lasting and will take a long time before anyone realizes it is the root for a LOT of tech debt and it takes years to also reverse.</p>

<p>If you are a manager promoting engineers to senior titles and an emphasis on ownership, including stability, is not a non-negotiable criterion of that promotion then you are damaging your organization. And if you think that a sense of ownership and truly understanding what it takes to create stable systems of scale can happen without ever being paged by a service in production then I am not sure why you are in charge of engineers supposedly building such systems of scale.</p>

<p>Finally, no one is saying this all ignores our lives outside work. In fact, the opposite. Ops engineers have lives too. We are men and women with spouses and babies who get sick and sometimes are solo parenting. Mature teams have each others‚Äô backs. Mature teams will override set on call shifts when life strikes and that is applauded.</p>

<p>What I (and I think Alice) are saying is ‚Äúdo not systematically make it acceptable to throw code at the production wall‚Äù‚Ä¶.not let‚Äôs page developers at 3 AM out of spite.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-03-25T03:17:11-07:00"><a href="http://localhost:4000/capacity-planning-databases/">March 25, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Silvia Botros">Silvia Botros</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/capacity-planning-databases/" rel="bookmark" title="Capacity planning for databases" itemprop="url">Capacity planning for databases</a></h1>
    
  </header>
  <div class="entry-content">
      <p><em>Note:</em> This is inspired by Julia Evans‚Äô recent post about ‚Ä¶.<a href="http://jvns.ca/blog/2016/03/20/how-do-you-do-capacity-planning/">capacity planning</a> üòå</p>

<h3 id="ground-rules">Ground rules</h3>

<h4 id="rdbms">RDBMS</h4>
<p>Yes..this post is geared for those of us who use MySQL with a single writer at a time and 2 or more read replicas. A lot of what I will talk about here applies differently, or not at all, to multi writer clustered datastores, although those also come with their own set of compromises and caveats. So‚Ä¶your milage will definitely vary.</p>

<h4 id="sharding">Sharding</h4>

<p>I have already covered large strokes of this in one of my <a href="https://blog.dbsmasher.com/2015/02/08/scaling-mysql-at-sendgrid/">earlier posts</a>, I mostly focused there on the benefits of functional or horizontal sharding. Yes that is a prerequisite, since what you use to access the database layer WILL decide how much flexibility you have to scale.</p>

<p>If you are a company that experiences large differences between peak and average traffic, you should be prepared to leave the paradigm of ‚Äòthe database‚Äô as a single physical entity behind.</p>

<h4 id="ability-to-split-reads-and-writes">Ability to split reads and writes</h4>

<p>This is something you will need to be able to do, but not necessarily enforce as a set in stone rule. There will be use cases where a write needs to be read very soon after and where tolerance for things like lag/eventual consistency is low. Those are ok to have, but in the same applications, you will also have scenarios for reads that <em>can</em> tolerate some longer time span of eventual consistency. When such reads are in high volume, do you really want that volume going to your single writer if it doesn‚Äôt really have to? Do yourself a favor, and make sure soon in your growth days that you can control the use of a read or write IP in your code.</p>

<p>Now onto the thought process of actual capacity planning‚Ä¶</p>

<p><strong>A database cluster is not keeping up. what do I do?</strong></p>

<h4 id="determine-the-system-bottleneck">Determine the system bottleneck</h4>

<ul>
  <li>Is the issue high CPU?</li>
  <li>Is it IO capacity?</li>
  <li>Is it growing lag without a clear query culprit?</li>
  <li>Is is locks?</li>
  <li>How do I know which it is?</li>
</ul>

<h4 id="you-need-a-baseline">You need a baseline</h4>
<p>Once you know what system metric you are mostly bound to, you need to establish baseline and peak values. Otherwise, determining whether your current issue is a bug vs real growth is going to be a lot more error prone than you‚Äôd like.</p>

<p>Basic server metrics can only go so far but at some point you will find you also need context based metrics. Query performance and app side perceived performance will tell you what the application sees as a response time to queries.</p>

<h4 id="learn-your-business-traffic-patterns">Learn your business traffic patterns</h4>
<p>Are you a business that is susceptible to peaks in specific weekdays (marketing)? do you have regular launches that triple or quadruple your traffic like gaming? These sorts of questions will drive how much of reserved headroom you should keep or whether you need to invest in elastic growth.</p>

<h4 id="determine-the-ratio-of-raw-traffic-numbers-in-relation-to-capacity-in-use">Determine the ratio of raw traffic numbers in relation to capacity in use</h4>
<p>This is simply the answer to ‚ÄúIf we made no code optimizations, how many emails/sales/whatever‚Äù can we serve with the database instance we have right now?</p>

<p>Ideally, this a specific value that makes the math towards planning a year‚Äôs growth a simple math equation. But life is never ideal and this value will vary depending on season or completely external happy factors like signing up a new major customer. In early startups this number is a faster moving target but it should stabilize as the company transitions from early days to more established business with more predictable business growth patterns.</p>

<h4 id="do-i-really-need-to-buy-more-machines">Do I really need to buy more machines?</h4>
<p>You need to find a way to determine if this is truly capacity (I need to split the writes to support more concurrent write load or add more read replicas) vs code based performance bottleneck (this new query can really have its results cached in something cheaper and not beat the database as much).</p>

<p>How do you do that? You need to get familiar with your queries. The baby step for that is a combination of <a href="http://innotop.googlecode.com/svn/html/manual.html">innotop</a>, slow log and the <a href="https://www.percona.com/software/mysql-tools/percona-toolkit">percona toolkit</a>‚Äôs pt-query-digest. You can automate this by shipping the DB logs to a central location and automating the digest portion.</p>

<p>But that is also not the entire picture, slow logs are performance intensive if you lower their threshold too much. If you need less selective sampling you will need to detect the entire conversations between the application and the datastore. In open source land you can go as basic as tcpdump or you can use hosted products like datadog, newrelic or vivid cortex.</p>

<h4 id="make-a-call">Make a call</h4>
<p>Capacity planning can be 90% science and 10% art but that 10% shouldn‚Äôt mean that we shouldn‚Äôt strive for as much of the picture as we can. As engineers we can sometimes fixate on the missing 10% and not realize that if we did the work, that 90% can get us v far into a better idea of our stack‚Äôs health, a more efficient use of our time optimizing performance and planning capacity increases carefully which eventually results in much better return on investment for our products.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    

    
    
      <li><strong class="current-page">1</strong></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="http://localhost:4000/page2/">2</a></li>
      
    

    
    

    
      <li><a href="http://localhost:4000/page3/">3</a></li>
    

    
    
      <li><a href="http://localhost:4000/page2/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="http://localhost:4000/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>







<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2018 Silvia Botros. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
